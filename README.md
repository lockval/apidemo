# lockval/apidemo

This is the source code of https://apidemo.lockval.com

You can download and edit client.yaml and public/server/...

to generate your own server

<!-- 
## Quick start

```sh
npm run buildBothAndPreview
```
-->

## 1. prepare some tools
- Git
- Node.js
- curl
- Go (1.19)
- Lua (>=5.1)
- [starc2one](https://github.com/lockval/starc2one#INSTALLATION)

## 2. Project Setup

Clone this project code, and execute the following code in the project directory.



```sh
npm install
```


## 3. Download and start your services (Execute start.sh or start.bat)

- [Linux amd64(X86)](https://downloads.lockval.com/v0.0.14.amd64.linux.zip)
- [Linux arm64](https://downloads.lockval.com/v0.0.14.arm64.linux.zip)
- [macOS amd64(X86)](https://downloads.lockval.com/v0.0.14.amd64.darwin.zip)
- [macOS arm64](https://downloads.lockval.com/v0.0.14.arm64.darwin.zip)
- [Windows amd64(X86)](https://downloads.lockval.com/v0.0.14.amd64.windows.zip)
- [Windows arm64](https://downloads.lockval.com/v0.0.14.arm64.windows.zip)




## 4. Build Client And Preview
1. edit client.yaml
2. run:
    ```sh
    npm run buildClientAndPreview
    ```

## 4. Build Server And Upload (Choose a language you want to use)


- JS
  #### edit public/server/javascript/... and run:
    ```sh
    npm run serverJsBuildAndUpload
    ```

- Lua
  #### edit public/server/lua/... and run:
    ```sh
    npm run serverLuaBuildAndUpload
    ```

- Starlark ([Starlark is a dialect of Python](https://github.com/bazelbuild/starlark))
  #### edit public/server/starlark/... and run:
    ```sh
    npm run serverStarBuildAndUpload
    ```

- Go (Only run on macOS and Linux)
  #### edit public/server/go/... and run:
    ```sh
    ./serverGoBuildAndUpload.sh
    ```


## Client Code:
- public/client/paclient.ts (core code)
- public/client/player.ts (User Event and Module Data Definition Code, Generated by client.yaml)


## Customize your own Authentication server

You can learn how to develop a login(Service AuthN) and a guest(3rd Platform AuthN) [here](https://github.com/lockval/authn)

## Define variables for your Production environment: 
(If you just want to preview locally, you can ignore this configuration)

```sh
export lockvalUpdatefileDomain=127.0.0.1:8080
export lockvalUpdatefilePassword=123456
export lockvalGwAddrs=http://127.0.0.1:59501,http://127.0.0.1:59502
```